import 'dart:convert';import 'package:flutter_koda_maker_take2/thank_you_page.dart';import 'package:http/http.dart'as http;import 'package:flutter/material.dart';class StatePage extends StatefulWidget {  final int countryId;  final String countryName;  const StatePage({Key key, this.countryId, this.countryName}) : super(key: key);  @override  _StatePageState createState() => _StatePageState();}class _StatePageState extends State<StatePage> {  List listOfStates;  Map stateResponse;  Future<void> getStateData() async{    Map data = {      "country_id": widget.countryId.toString(),    };    var response = await http.post(      'http://15.207.218.57/gujaratis-online/public/api/states',      body: data,    );    if(response.statusCode == 200){      setState(() {        stateResponse = jsonDecode(response.body);        listOfStates = stateResponse['states'];      });      print(stateResponse);    }  }  @override  void initState() {    // TODO: implement initState    super.initState();    getStateData();  }  @override  Widget build(BuildContext context) {    return Scaffold(      appBar: AppBar(        title: Text('List States'),      ),      body: Center(          child: stateResponse == null ? Container() :          ListView.builder(              itemCount: listOfStates == null ? 0 : listOfStates.length,              itemBuilder: (context,index){                return ListTile(                  title: Text(listOfStates[index]['name']),                  trailing: Icon(Icons.arrow_forward_ios_outlined),                  onTap: (){                    Navigator.push(context, MaterialPageRoute(                        builder: (context)=> ThankYouPage(                          stateName: listOfStates[index]['name'],                          countryName: widget.countryName,                        )));                  },                );              }          )      ),    );  }}